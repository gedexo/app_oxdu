{% extends "accounting/accounting_base.html" %}

{% block content %}

<div class="main-content app-content">

<div class="container-fluid">

<div class="accounting-header">
    <h2><i class="fas fa-chart-line me-2"></i>{{ title|default:"Profit & Loss Statement" }}</h2>
    <p>View the profit and loss statement for all accounts</p>
</div>

<div class="card custom-card accounting-card">
    <div class="card-body">
        <div class="row">

            <!-- ASSETS -->
            <div class="col-md-6">
                <h4>Assets</h4>
                <table class="table table-bordered table-striped">
                    <tbody>
                        {% for row in assets %}
                        <tr>
                            <td style="padding-left: {{ row.account.under.level|add:1 }}em;">
                                {{ row.account.name }}
                            </td>
                            <td class="text-end">
                                {{ row.balance|floatformat:2 }}
                            </td>
                        </tr>
                        {% endfor %}
                        <tr class="fw-bold">
                            <td>Total Assets</td>
                            <td class="text-end">{{ total_assets|floatformat:2 }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- LIABILITIES + EQUITY -->
            <div class="col-md-6">

                <h4>Liabilities</h4>
                <table class="table table-bordered table-striped">
                    <tbody>
                        {% for row in liabilities %}
                        <tr>
                            <td style="padding-left: {{ row.account.under.level|add:1 }}em;">
                                {{ row.account.name }}
                            </td>
                            <td class="text-end">
                                {{ row.balance|floatformat:2 }}
                            </td>
                        </tr>
                        {% endfor %}
                        <tr class="fw-bold">
                            <td>Total Liabilities</td>
                            <td class="text-end">{{ total_liabilities|floatformat:2 }}</td>
                        </tr>
                    </tbody>
                </table>

                <h4 class="mt-4">Equity</h4>
                <table class="table table-bordered table-striped">
                    <tbody>
                        {% for row in equity %}
                        <tr>
                            <td style="padding-left: {{ row.account.under.level|add:1 }}em;">
                                {{ row.account.name }}
                            </td>
                            <td class="text-end">
                                {{ row.balance|floatformat:2 }}
                            </td>
                        </tr>
                        {% endfor %}
                        <tr class="fw-bold">
                            <td>Total Equity</td>
                            <td class="text-end">{{ total_equity|floatformat:2 }}</td>
                        </tr>
                    </tbody>
                </table>

                <table class="table table-bordered fw-bold mt-3">
                    <tr>
                        <td>Total Liabilities & Equity</td>
                        <td class="text-end">
                            {{ total_liabilities|add:total_equity|floatformat:2 }}
                        </td>
                    </tr>
                </table>

            </div>
        </div>

        <!-- ACCOUNTING EQUATION -->
        <div class="alert alert-info mt-4">
            <strong>Assets = Liabilities + Equity</strong><br>
            {{ total_assets|floatformat:2 }} =
            {{ total_liabilities|floatformat:2 }} +
            {{ total_equity|floatformat:2 }}
        </div>
    </div>
</div>

</div>
</div>
{% endblock %}
